/*
 * slinto.autocomplete() v0.1.0
 * https://github.com/slinto/slinto.autocomplete
 * Copyright 2014 Slinto; Licensed MIT
 */
(function(){var l=this;
function n(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";else if("function"==
b&&"undefined"==typeof a.call)return"object";return b}function aa(a){var b=n(a);return"array"==b||"object"==b&&"number"==typeof a.length}function p(a){return"string"==typeof a}function q(a){var b=typeof a;return"object"==b&&null!=a||"function"==b};function da(a){if(!ea.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(fa,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(ga,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(ha,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(ia,"&quot;"));-1!=a.indexOf("'")&&(a=a.replace(ja,"&#39;"));-1!=a.indexOf("\x00")&&(a=a.replace(ka,"&#0;"));return a}var fa=/&/g,ga=/</g,ha=/>/g,ia=/"/g,ja=/'/g,ka=/\x00/g,ea=/[\x00&<>"']/;function r(a,b){return a<b?-1:a>b?1:0};var s=Array.prototype,la=s.indexOf?function(a,b,c){return s.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(p(a))return p(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},u=s.forEach?function(a,b,c){s.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=p(a)?a.split(""):a,e=0;e<d;e++)e in f&&b.call(c,f[e],e,a)},ma=s.filter?function(a,b,c){return s.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=[],e=0,g=p(a)?
a.split(""):a,h=0;h<d;h++)if(h in g){var k=g[h];b.call(c,k,h,a)&&(f[e++]=k)}return f};function v(a,b){return 0<=la(a,b)}function na(a,b){var c=la(a,b),d;(d=0<=c)&&s.splice.call(a,c,1);return d}function oa(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}function pa(a,b,c){return 2>=arguments.length?s.slice.call(a,b):s.slice.call(a,b,c)};function w(a){a=a.className;return p(a)&&a.match(/\S+/g)||[]}function x(a,b){var c=w(a);qa(c,pa(arguments,1));a.className=c.join(" ")}function ra(a,b){var c=w(a),c=sa(c,pa(arguments,1));a.className=c.join(" ")}function qa(a,b){for(var c=0;c<b.length;c++)v(a,b[c])||a.push(b[c])}function sa(a,b){return ma(a,function(a){return!v(b,a)})}function ta(a,b){var c=y.e,d=w(c);p(a)?na(d,a):"array"==n(a)&&(d=sa(d,a));p(b)&&!v(d,b)?d.push(b):"array"==n(b)&&qa(d,b);c.className=d.join(" ")};function ua(a,b){for(var c in a)b.call(void 0,a[c],c,a)}var va="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function wa(a,b){for(var c,d,f=1;f<arguments.length;f++){d=arguments[f];for(c in d)a[c]=d[c];for(var e=0;e<va.length;e++)c=va[e],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var z;a:{var xa=l.navigator;if(xa){var ya=xa.userAgent;if(ya){z=ya;break a}}z=""}function A(a){return-1!=z.indexOf(a)};var za=A("Opera")||A("OPR"),B=A("Trident")||A("MSIE"),C=A("Gecko")&&-1==z.toLowerCase().indexOf("webkit")&&!(A("Trident")||A("MSIE")),D=-1!=z.toLowerCase().indexOf("webkit");function Aa(){var a=l.document;return a?a.documentMode:void 0}var Ba=function(){var a="",b;if(za&&l.opera)return a=l.opera.version,"function"==n(a)?a():a;C?b=/rv\:([^\);]+)(\)|;)/:B?b=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:D&&(b=/WebKit\/(\S+)/);b&&(a=(a=b.exec(z))?a[1]:"");return B&&(b=Aa(),b>parseFloat(a))?String(b):a}(),Ca={};
function F(a){var b;if(!(b=Ca[a])){b=0;for(var c=String(Ba).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),f=Math.max(c.length,d.length),e=0;0==b&&e<f;e++){var g=c[e]||"",h=d[e]||"",k=RegExp("(\\d*)(\\D*)","g"),fb=RegExp("(\\d*)(\\D*)","g");do{var E=k.exec(g)||["","",""],m=fb.exec(h)||["","",""];if(0==E[0].length&&0==m[0].length)break;b=r(0==E[1].length?0:parseInt(E[1],10),0==m[1].length?0:parseInt(m[1],10))||r(0==E[2].length,0==m[2].length)||
r(E[2],m[2])}while(0==b)}b=Ca[a]=0<=b}return b}var Da=l.document,G=Da&&B?Aa()||("CSS1Compat"==Da.compatMode?parseInt(Ba,10):5):void 0;var Ea=!B||B&&9<=G,Fa=!C&&!B||B&&B&&9<=G||C&&F("1.9.1"),Ga=B&&!F("9");function Ha(a){var b=document;return p(a)?b.getElementById(a):a}function Ia(a,b){var c=b||document,d=null;return(d=c.querySelectorAll&&c.querySelector?c.querySelector("."+a):H("*",a,b)[0])||null}
function H(a,b,c){var d=document;c=c||d;a=a&&"*"!=a?a.toUpperCase():"";if(c.querySelectorAll&&c.querySelector&&(a||b))return c.querySelectorAll(a+(b?"."+b:""));if(b&&c.getElementsByClassName){c=c.getElementsByClassName(b);if(a){for(var d={},f=0,e=0,g;g=c[e];e++)a==g.nodeName&&(d[f++]=g);d.length=f;return d}return c}c=c.getElementsByTagName(a||"*");if(b){d={};for(e=f=0;g=c[e];e++)a=g.className,"function"==typeof a.split&&v(a.split(/\s+/),b)&&(d[f++]=g);d.length=f;return d}return c}
function Ja(a,b){ua(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in Ka?a.setAttribute(Ka[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,b):a[d]=b})}var Ka={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function I(a,b,c){var d=arguments,f=document,e=d[0],g=d[1];if(!Ea&&g&&(g.name||g.type)){e=["<",e];g.name&&e.push(' name="',da(g.name),'"');if(g.type){e.push(' type="',da(g.type),'"');var h={};wa(h,g);delete h.type;g=h}e.push(">");e=e.join("")}e=f.createElement(e);g&&(p(g)?e.className=g:"array"==n(g)?e.className=g.join(" "):Ja(e,g));2<d.length&&La(f,e,d,2);return e}
function La(a,b,c,d){function f(c){c&&b.appendChild(p(c)?a.createTextNode(c):c)}for(;d<c.length;d++){var e=c[d];if(!aa(e)||q(e)&&0<e.nodeType)f(e);else{var g;a:{if(e&&"number"==typeof e.length){if(q(e)){g="function"==typeof e.item||"string"==typeof e.item;break a}if("function"==n(e)){g="function"==typeof e.item;break a}}g=!1}u(g?oa(e):e,f)}}}function J(a,b){La(9==a.nodeType?a:a.ownerDocument||a.document,a,arguments,1)}
function Ma(a){return Fa&&void 0!=a.children?a.children:ma(a.childNodes,function(a){return 1==a.nodeType})}var Na={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},Oa={IMG:" ",BR:"\n"};function Pa(a){if(Ga&&"innerText"in a)a=a.innerText.replace(/(\r\n|\r|\n)/g,"\n");else{var b=[];Qa(a,b,!0);a=b.join("")}a=a.replace(/ \xAD /g," ").replace(/\xAD/g,"");a=a.replace(/\u200B/g,"");Ga||(a=a.replace(/ +/g," "));" "!=a&&(a=a.replace(/^\s*/,""));return a}
function Qa(a,b,c){if(!(a.nodeName in Na))if(3==a.nodeType)c?b.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):b.push(a.nodeValue);else if(a.nodeName in Oa)b.push(Oa[a.nodeName]);else for(a=a.firstChild;a;)Qa(a,b,c),a=a.nextSibling};var K,y;function L(a,b,c){for(var d=0;d<b;d++)if(Pa(a[d])===c)return d}function M(a,b){for(var c=0;c<b;c++)"li"===a[c].localName&&ra(a[c],"active")}function O(a,b,c,d){for(;c<b;c++)if("li"===a[c].localName){x(a[c],"active");Ja(d,{"data-url":a[c].getAttribute("data-url")});d.value=Pa(a[c]);break}}
function Ra(a){var b={};indexOfId=a.indexOf("#");indexOfClass=a.indexOf(".");0<indexOfId&&0<indexOfClass?(b.element=a.substring(0,indexOfId),b.id=a.substring(indexOfId+1,indexOfClass),b.className=a.substring(indexOfClass+1)):0<indexOfId?(b.element=a.substring(0,indexOfId),b.id=a.substring(indexOfId+1)):0<indexOfClass?(b.element=a.substring(0,indexOfClass),b.className=a.substring(indexOfClass+1)):b.element=a;return b}
function Ta(a){if(q(a))return H("input",void 0,a)[0];a=Ra(a);return a.id?Ha(a.id):a.className&&a.element?H(a.element,a.className,void 0)[0]:a.className?Ia(a.className):H(a.element,void 0,void 0)[0]}function Ua(a,b){var c=Ra(a),d=I(c.element);c.id&&(d.id=c.id);c.className&&x(d,c.className);J(b,d);return d}function Va(){ta("slinto-autocomplete-show","slinto-autocomplete-hide");void 0!==y.c.close&&y.c.close()}
function P(a){var b=a.target.textContent||a.target.innerText;a=a.target.getAttribute("data-url");""!==b&&null!==a&&y.c.select&&y.c.select(a,b);Va()};var Wa="closure_listenable_"+(1E6*Math.random()|0),Xa=0;function Ya(a,b,c,d,f){this.d=a;this.h=null;this.src=b;this.type=c;this.j=!!d;this.k=f;this.key=++Xa;this.f=this.i=!1}function Za(a){a.f=!0;a.d=null;a.h=null;a.src=null;a.k=null};function Q(a){this.src=a;this.b={};this.l=0}Q.prototype.add=function(a,b,c,d,f){var e=a.toString();a=this.b[e];a||(a=this.b[e]=[],this.l++);var g;a:{for(g=0;g<a.length;++g){var h=a[g];if(!h.f&&h.d==b&&h.j==!!d&&h.k==f)break a}g=-1}-1<g?(b=a[g],c||(b.i=!1)):(b=new Ya(b,this.src,e,!!d,f),b.i=c,a.push(b));return b};var $a=!B||B&&9<=G,ab=B&&!F("9");!D||F("528");C&&F("1.9b")||B&&F("8")||za&&F("9.5")||D&&F("528");C&&!F("8")||B&&F("9");function R(a,b){this.type=a;this.currentTarget=this.target=b;this.defaultPrevented=this.o=!1}R.prototype.preventDefault=function(){this.defaultPrevented=!0};function S(a){S[" "](a);return a}S[" "]=function(){};function T(a,b){R.call(this,a?a.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.charCode=this.keyCode=this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.n=this.state=null;if(a){var c=this.type=a.type;this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(C){var f;a:{try{S(d.nodeName);f=!0;break a}catch(e){}f=!1}f||(d=null)}}else"mouseover"==c?d=
a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=D||void 0!==a.offsetX?a.offsetX:a.layerX;this.offsetY=D||void 0!==a.offsetY?a.offsetY:a.layerY;this.clientX=void 0!==a.clientX?a.clientX:a.pageX;this.clientY=void 0!==a.clientY?a.clientY:a.pageY;this.screenX=a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=
a.metaKey;this.state=a.state;this.n=a;a.defaultPrevented&&this.preventDefault()}}(function(){function a(){}a.prototype=R.prototype;T.w=R.prototype;T.prototype=new a;T.A=function(a,c,d){return R.prototype[c].apply(a,Array.prototype.slice.call(arguments,2))}})();T.prototype.preventDefault=function(){T.w.preventDefault.call(this);var a=this.n;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,ab)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var U="closure_lm_"+(1E6*Math.random()|0),V={},bb=0;function W(a,b,c,d,f){if("array"==n(b))for(var e=0;e<b.length;e++)W(a,b[e],c,d,f);else if(c=cb(c),a&&a[Wa])a.C(b,c,d,f);else{if(!b)throw Error("Invalid event type");var e=!!d,g=X(a);g||(a[U]=g=new Q(a));c=g.add(b,c,!1,d,f);c.h||(d=db(),c.h=d,d.src=a,d.d=c,a.addEventListener?a.addEventListener(b.toString(),d,e):a.attachEvent(eb(b.toString()),d),bb++)}}
function db(){var a=gb,b=$a?function(c){return a.call(b.src,b.d,c)}:function(c){c=a.call(b.src,b.d,c);if(!c)return c};return b}function eb(a){return a in V?V[a]:V[a]="on"+a}function hb(a,b,c,d){var f=1;if(a=X(a))if(b=a.b[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var e=b[a];e&&e.j==c&&!e.f&&(f&=!1!==ib(e,d))}return Boolean(f)}
function ib(a,b){var c=a.d,d=a.k||a.src;if(a.i&&"number"!=typeof a&&a&&!a.f){var f=a.src;if(f&&f[Wa])f.D(a);else{var e=a.type,g=a.h;f.removeEventListener?f.removeEventListener(e,g,a.j):f.detachEvent&&f.detachEvent(eb(e),g);bb--;(e=X(f))?(g=a.type,g in e.b&&na(e.b[g],a)&&(Za(a),0==e.b[g].length&&(delete e.b[g],e.l--)),0==e.l&&(e.src=null,f[U]=null)):Za(a)}}return c.call(d,b)}
function gb(a,b){if(a.f)return!0;if(!$a){var c;if(!(c=b))a:{c=["window","event"];for(var d=l,f;f=c.shift();)if(null!=d[f])d=d[f];else{c=null;break a}c=d}f=c;c=new T(f,this);d=!0;if(!(0>f.keyCode||void 0!=f.returnValue)){a:{var e=!1;if(0==f.keyCode)try{f.keyCode=-1;break a}catch(g){e=!0}if(e||void 0==f.returnValue)f.returnValue=!0}f=[];for(e=c.currentTarget;e;e=e.parentNode)f.push(e);for(var e=a.type,h=f.length-1;!c.o&&0<=h;h--)c.currentTarget=f[h],d&=hb(f[h],e,!0,c);for(h=0;!c.o&&h<f.length;h++)c.currentTarget=
f[h],d&=hb(f[h],e,!1,c)}return d}return ib(a,new T(b,this))}function X(a){a=a[U];return a instanceof Q?a:null}var jb="__closure_events_fn_"+(1E9*Math.random()>>>0);function cb(a){if("function"==n(a))return a;a[jb]||(a[jb]=function(b){return a.handleEvent(b)});return a[jb]};function kb(a,b){for(var c=a.length,d=0;d<c;d++)if(null!==b.pattern.exec(a[d])){c=I("li",{"data-url":b.a.url,"class":"item"},b.a.value);J(b.g,c);K++;break}};function lb(a){if("DEV"===mb)var b=new Date;var c=a.input.value,d=a.e,f=a.r,e=a.s;a=a.v;d.innerHTML="";v(w(y.e),"slinto-autocomplete-show")||(ta("slinto-autocomplete-hide","slinto-autocomplete-show"),void 0!==y.c.open&&y.c.open());if(""===c)d.innerHTML=" ",Va();else{var g=RegExp(c,"i");u(f,function(a,b){var c=a.length,f;void 0!==e&&void 0!==e[b]&&(f=I("div",{"class":"heading"},e[b]),J(d,f));a:{K=1;for(f=0;f<c;f++){var m=a[f],t=document.createDocumentFragment();if(y.p)for(var m={a:m,g:t,pattern:g,
q:y.p},ba=0;ba<m.q.length;ba++){var ca=m.a[m.q[ba]];if(aa(ca))kb(ca,m);else{var N=m,Sa=void 0;null!==N.pattern.exec(ca)&&(Sa=I("li",{"data-url":N.a.url,"class":"item"},N.a.value),J(N.g,Sa),K++)}}else t={a:m,g:t,pattern:g},kb(t.a.tokens,t),t=t.g;J(d,t);if(K>nb){c=0;break a}}c=K}1===c&&(c=d.childNodes.length,void 0!==d.childNodes[c-1]&&d.removeChild(d.childNodes[c-1]))});""===d.innerHTML&&(c=I("li",void 0,a.t),J(d,c));"DEV"===mb&&console.log("Search time: "+(new Date-b)+"ms")}};function ob(a,b,c){c=Ma(c);var d=c.length;M(c,d);a=L(c,d,a);O(c,d,a,b)};function pb(a){var b=y,c=a.length,d=b.input,f=b.e,e=b.headings;W(d,"keyup",function(g){var h=g.keyCode;if(13===h)P(g);else if(38!==h&&40!==h)lb({input:d,e:f,B:c,r:a,s:e,v:b});else{var k;k=Ma(f);g=Ia("active",f);if(38===h)if(h=k.length,null===g)O(k,h,h-1,d);else if(activeText=g.textContent,prevIndex=L(k,h,activeText)-1,M(k,h),0===prevIndex)O(k,h,h-1,d);else for(i=h-1;0<i;i--){if("li"===k[i].localName&&i<=prevIndex){O(k,h,i,d);break}}else h=k.length,null===g?O(k,h,0,d):(activeText=g.textContent,nextIndex=
L(k,h,activeText)+1,M(k,h),nextIndex===h&&(nextIndex=0),O(k,h,nextIndex,d))}});W(f,"click",function(a){var b=a.target.textContent;"item"===a.target.className&&(ob(b,d,f),P(a))});W(f,"keyup",function(a){13===a.keyCode&&(ob(a.target.textContent,d,f),P(a))})};function qb(a){var b=[];u(a,function(a,d){var f=new XMLHttpRequest,e;f.open("GET",a,!1);f.send(null);200===f.status&&(e=JSON.parse(f.responseText));b[d]=e});return b};var nb=5,mb="PRODUCTION";function rb(a){nb=a.u?a.u:nb;a.m=Ha(a.wrapper);a.input=a.input?Ta(a.input):Ta(a.m);a.input.autocomplete="off";a.e=a.resultWrapper?Ua(a.resultWrapper,a.m):Ua("ul",a.m);a.t=a.noResultMessage||"Sorry, not found.";a.p=a.scan;a.c=void 0!==a.events?{open:a.events.open,close:a.events.close,select:a.events.select}:{open:void 0,close:void 0,select:void 0};y=a;a=qb(a.files);pb(a);x(y.e,"slinto-autocomplete-hide")}var Y=["slinto","autocomplete","init"],Z=l;
Y[0]in Z||!Z.execScript||Z.execScript("var "+Y[0]);for(var $;Y.length&&($=Y.shift());)Y.length||void 0===rb?Z=Z[$]?Z[$]:Z[$]={}:Z[$]=rb;}).call(this);
